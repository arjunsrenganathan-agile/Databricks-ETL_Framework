resources:
  jobs:
    Medallion_Architecture_job:
      name: Medallion_Architecture_job
      tasks:
        - task_key: Build_Bronze_Layer
          notebook_task:
            notebook_path: ETL_Framework/src/ETL_Framework/Build_Medallion_Architecture/Build_Bronze_Layer
            source: GIT
          max_retries: 1
          min_retry_interval_millis: 900000
          retry_on_timeout: true
          disable_auto_optimization: false
          timeout_seconds: 3600
          health:
            rules:
              - metric: RUN_DURATION_SECONDS
                op: GREATER_THAN
                value: 1800
          email_notifications:
            on_failure:
              - arjun.shankar@agile-analytics.com.au
            on_duration_warning_threshold_exceeded:
              - arjun.shankar@agile-analytics.com.au
        - task_key: Build_Silver_Layer
          depends_on:
            - task_key: Build_Bronze_Layer
          notebook_task:
            notebook_path: ETL_Framework/src/ETL_Framework/Build_Medallion_Architecture/Build_Silver_Layer
            source: GIT
          max_retries: 1
          min_retry_interval_millis: 900000
          retry_on_timeout: true
          disable_auto_optimization: false
          timeout_seconds: 3600
          health:
            rules:
              - metric: RUN_DURATION_SECONDS
                op: GREATER_THAN
                value: 1800
          email_notifications:
            on_failure:
              - arjun.shankar@agile-analytics.com.au
            on_duration_warning_threshold_exceeded:
              - arjun.shankar@agile-analytics.com.au
        - task_key: Build_Dims
          depends_on:
            - task_key: Build_Silver_Layer
          notebook_task:
            notebook_path: ETL_Framework/src/ETL_Framework/Build_Medallion_Architecture/Build_Silver_Layer
            source: GIT
          max_retries: 1
          min_retry_interval_millis: 900000
          retry_on_timeout: true
          disable_auto_optimization: false
          timeout_seconds: 3600
          health:
            rules:
              - metric: RUN_DURATION_SECONDS
                op: GREATER_THAN
                value: 1800
          email_notifications:
            on_failure:
              - arjun.shankar@agile-analytics.com.au
            on_duration_warning_threshold_exceeded:
              - arjun.shankar@agile-analytics.com.au
        - task_key: Build_Facts
          depends_on:
            - task_key: Build_Dims
          notebook_task:
            notebook_path: ETL_Framework/src/ETL_Framework/Build_Medallion_Architecture/Build_Silver_Layer
            source: GIT
          max_retries: 1
          min_retry_interval_millis: 900000
          retry_on_timeout: true
          disable_auto_optimization: false
          timeout_seconds: 3600
          health:
            rules:
              - metric: RUN_DURATION_SECONDS
                op: GREATER_THAN
                value: 1800
          email_notifications:
            on_failure:
              - arjun.shankar@agile-analytics.com.au
            on_duration_warning_threshold_exceeded:
              - arjun.shankar@agile-analytics.com.au
        - task_key: Bronze_DQ
          depends_on:
            - task_key: Build_Facts
          notebook_task:
            notebook_path: ETL_Framework/src/ETL_Framework/Data_Quality_Checks/Bronze_Data_Quality_Checks
            source: GIT
          max_retries: 1
          min_retry_interval_millis: 900000
          retry_on_timeout: true
          disable_auto_optimization: false
          timeout_seconds: 3600
          health:
            rules:
              - metric: RUN_DURATION_SECONDS
                op: GREATER_THAN
                value: 1800
          email_notifications:
            on_failure:
              - arjun.shankar@agile-analytics.com.au
            on_duration_warning_threshold_exceeded:
              - arjun.shankar@agile-analytics.com.au
        - task_key: Gold_DQ
          depends_on:
            - task_key: Build_Facts
          notebook_task:
            notebook_path: ETL_Framework/src/ETL_Framework/Data_Quality_Checks/Gold_Data_Quality_Checks
            source: GIT
          max_retries: 1
          min_retry_interval_millis: 900000
          retry_on_timeout: true
          disable_auto_optimization: false
          timeout_seconds: 3600
          health:
            rules:
              - metric: RUN_DURATION_SECONDS
                op: GREATER_THAN
                value: 1800
          email_notifications:
            on_failure:
              - arjun.shankar@agile-analytics.com.au
            on_duration_warning_threshold_exceeded:
              - arjun.shankar@agile-analytics.com.au
        - task_key: Silver_DQ
          depends_on:
            - task_key: Build_Facts
          notebook_task:
            notebook_path: ETL_Framework/src/ETL_Framework/Data_Quality_Checks/Silver_Data_Quality_Checks
            source: GIT
          max_retries: 1
          min_retry_interval_millis: 900000
          retry_on_timeout: true
          disable_auto_optimization: false
          timeout_seconds: 3600
          health:
            rules:
              - metric: RUN_DURATION_SECONDS
                op: GREATER_THAN
                value: 1800
          email_notifications:
            on_failure:
              - arjun.shankar@agile-analytics.com.au
            on_duration_warning_threshold_exceeded:
              - arjun.shankar@agile-analytics.com.au
      git_source:
        git_url: https://github.com/arjunsrenganathan-agile/ETL_Framework
        git_provider: gitHub
        git_branch: main
      queue:
        enabled: true
      performance_target: STANDARD
